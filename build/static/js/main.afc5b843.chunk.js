(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{73:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),r=c(22),s=c.n(r),i=c(20),o=c.n(i),l=c(27),u=c(10),d=c(85),j=c(84),b=c(80),O=c(78),p=c(47),m=(c(59),c(74),p.a.initializeApp({apiKey:"AIzaSyC9shyVJuKnK5LhLQ7wYwhcvUyukJXm2AY",authDomain:"kanban-39624.firebaseapp.com",projectId:"kanban-39624",storageBucket:"kanban-39624.appspot.com",messagingSenderId:"439317602817",appId:"1:439317602817:web:3919cd3dc648eaa4a91600",measurementId:"G-SJH8K480C1"})),x=m.firestore(),h={getCurrentTimestamp:p.a.firestore.FieldValue.serverTimestamp},f=m.auth();var v=c(2),g=n.a.createContext();function w(){return Object(a.useContext)(g)}function k(e){var t=e.children,c=Object(a.useState)(),n=Object(u.a)(c,2),r=n[0],s=n[1],i=Object(a.useState)(!0),o=Object(u.a)(i,2),l=o[0],d=o[1];Object(a.useEffect)((function(){return f.onAuthStateChanged((function(e){s(e),d(!1)}))}),[]);var j={currentUser:r,login:function(e,t){return f.signInWithEmailAndPassword(e,t)},signup:function(e,t){return f.createUserWithEmailAndPassword(e,t)},logout:function(){return f.signOut()},resetPassword:function(e){return f.sendPasswordResetEmail(e)},updateEmail:function(e){return r.updateEmail(e)},updatePassword:function(e){return r.updatePassword(e)}};return Object(v.jsx)(g.Provider,{value:j,children:!l&&t})}var y=c(11),I=c(14),S=c(77);function N(e){var t=e.children;return Object(v.jsx)(S.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(v.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:t})})}function C(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useRef)(),n=w().signup,r=Object(a.useState)(""),s=Object(u.a)(r,2),i=s[0],p=s[1],m=Object(a.useState)(!1),x=Object(u.a)(m,2),h=x[0],f=x[1],g=(w().currentUser,Object(y.g)());function k(){return(k=Object(l.a)(o.a.mark((function a(r){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.preventDefault(),t.current.value===c.current.value){a.next=3;break}return a.abrupt("return",p("Passwords do not match"));case 3:return a.prev=3,p(""),f(!0),a.next=8,n(e.current.value,t.current.value);case 8:g.push("/"),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(3),p("Failed to create an account");case 14:f(!1);case 15:case"end":return a.stop()}}),a,null,[[3,11]])})))).apply(this,arguments)}return Object(v.jsxs)(N,{children:[Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),i&&Object(v.jsx)(j.a,{variant:"danger",children:i}),Object(v.jsxs)(b.a,{onSubmit:function(e){return k.apply(this,arguments)},children:[Object(v.jsxs)(b.a.Group,{id:"email",children:[Object(v.jsx)(b.a.Label,{children:"Email"}),Object(v.jsx)(b.a.Control,{type:"email",ref:e,required:!0})]}),Object(v.jsxs)(b.a.Group,{id:"password",children:[Object(v.jsx)(b.a.Label,{children:"Password"}),Object(v.jsx)(b.a.Control,{type:"password",ref:t,required:!0})]}),Object(v.jsxs)(b.a.Group,{id:"password-confirm",children:[Object(v.jsx)(b.a.Label,{children:"Password Confirmation"}),Object(v.jsx)(b.a.Control,{type:"password",ref:c,required:!0})]}),Object(v.jsx)(O.a,{disabled:h,className:"w-100",type:"submit",children:"Sign Up"})]})]})}),Object(v.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(v.jsx)(I.b,{to:"/login",children:"Log In"})]})]})}function P(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),c=t[0],n=t[1],r=w(),s=r.currentUser,i=r.logout,b=Object(y.g)();function p(){return(p=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,i();case 4:b.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(v.jsxs)(N,{children:[Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h2",{className:"text-center mb-4",children:"Profile"}),c&&Object(v.jsx)(j.a,{variant:"danger",children:c}),Object(v.jsx)("strong",{children:"Email:"})," ",s.email,Object(v.jsx)(I.b,{to:"/update-profile",className:"btn btn-primary w-100 mt-3",children:"Update Profile"})]})}),Object(v.jsxs)("div",{className:"w-100 text-center mt-2",children:[Object(v.jsx)(O.a,{variant:"link",as:I.b,to:"/",children:"Return Home"}),Object(v.jsx)(O.a,{variant:"link",onClick:function(){return p.apply(this,arguments)},children:"Log Out"})]})]})}function U(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=w().login,n=Object(a.useState)(""),r=Object(u.a)(n,2),s=r[0],i=r[1],p=Object(a.useState)(!1),m=Object(u.a)(p,2),x=m[0],h=m[1],f=Object(y.g)();function g(){return(g=Object(l.a)(o.a.mark((function a(n){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,i(""),h(!0),a.next=6,c(e.current.value,t.current.value);case 6:f.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),i("Failed to log in");case 12:h(!1);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))).apply(this,arguments)}return Object(v.jsxs)(N,{children:[Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),s&&Object(v.jsx)(j.a,{variant:"danger",children:s}),Object(v.jsxs)(b.a,{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(v.jsxs)(b.a.Group,{id:"email",children:[Object(v.jsx)(b.a.Label,{children:"Email"}),Object(v.jsx)(b.a.Control,{type:"email",ref:e,required:!0})]}),Object(v.jsxs)(b.a.Group,{id:"password",children:[Object(v.jsx)(b.a.Label,{children:"Password"}),Object(v.jsx)(b.a.Control,{type:"password",ref:t,required:!0})]}),Object(v.jsx)(O.a,{disabled:x,className:"w-100",type:"submit",children:"Log In"})]}),Object(v.jsx)("div",{className:"w-100 text-center mt-3",children:Object(v.jsx)(I.b,{to:"/forgot-password",children:"Forgot Password?"})})]})}),Object(v.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(v.jsx)(I.b,{to:"/signup",children:"Sign Up"})]})]})}var E=c(9),L=c(53),D=["component"];function R(e){var t=e.component,c=Object(L.a)(e,D),a=w().currentUser;return Object(v.jsx)(y.b,Object(E.a)(Object(E.a)({},c),{},{render:function(e){return a?Object(v.jsx)(t,Object(E.a)({},e)):Object(v.jsx)(y.a,{to:"/login"})}}))}function A(){var e=Object(a.useRef)(),t=w().resetPassword,c=Object(a.useState)(""),n=Object(u.a)(c,2),r=n[0],s=n[1],i=Object(a.useState)(""),p=Object(u.a)(i,2),m=p[0],x=p[1],h=Object(a.useState)(!1),f=Object(u.a)(h,2),g=f[0],k=f[1];function y(){return(y=Object(l.a)(o.a.mark((function c(a){return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a.preventDefault(),c.prev=1,x(""),s(""),k(!0),c.next=7,t(e.current.value);case 7:x("Check your inbox for further instructions"),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),s("Failed to reset password");case 13:k(!1);case 14:case"end":return c.stop()}}),c,null,[[1,10]])})))).apply(this,arguments)}return Object(v.jsxs)(N,{children:[Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),r&&Object(v.jsx)(j.a,{variant:"danger",children:r}),m&&Object(v.jsx)(j.a,{variant:"success",children:m}),Object(v.jsxs)(b.a,{onSubmit:function(e){return y.apply(this,arguments)},children:[Object(v.jsxs)(b.a.Group,{id:"email",children:[Object(v.jsx)(b.a.Label,{children:"Email"}),Object(v.jsx)(b.a.Control,{type:"email",ref:e,required:!0})]}),Object(v.jsx)(O.a,{disabled:g,className:"w-100",type:"submit",children:"Reset Password"})]}),Object(v.jsx)("div",{className:"w-100 text-center mt-3",children:Object(v.jsx)(I.b,{to:"/login",children:"Login"})})]})}),Object(v.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(v.jsx)(I.b,{to:"/signup",children:"Sign Up"})]})]})}function F(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useRef)(),n=w(),r=n.currentUser,s=n.updatePassword,i=n.updateEmail,o=Object(a.useState)(""),l=Object(u.a)(o,2),p=l[0],m=l[1],x=Object(a.useState)(!1),h=Object(u.a)(x,2),f=h[0],g=h[1],k=Object(y.g)();return Object(v.jsxs)(N,{children:[Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h2",{className:"text-center mb-4",children:"Update Profile"}),p&&Object(v.jsx)(j.a,{variant:"danger",children:p}),Object(v.jsxs)(b.a,{onSubmit:function(a){if(a.preventDefault(),t.current.value!==c.current.value)return m("Passwords do not match");var n=[];g(!0),m(""),e.current.value!==r.email&&n.push(i(e.current.value)),t.current.value&&n.push(s(t.current.value)),Promise.all(n).then((function(){k.push("/user")})).catch((function(){m("Failed to update account")})).finally((function(){g(!1)}))},children:[Object(v.jsxs)(b.a.Group,{id:"email",children:[Object(v.jsx)(b.a.Label,{children:"Email"}),Object(v.jsx)(b.a.Control,{type:"email",ref:e,required:!0,defaultValue:r.email})]}),Object(v.jsxs)(b.a.Group,{id:"password",children:[Object(v.jsx)(b.a.Label,{children:"Password"}),Object(v.jsx)(b.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same"})]}),Object(v.jsxs)(b.a.Group,{id:"password-confirm",children:[Object(v.jsx)(b.a.Label,{children:"Password Confirmation"}),Object(v.jsx)(b.a.Control,{type:"password",ref:c,placeholder:"Leave blank to keep the same"})]}),Object(v.jsx)(O.a,{disabled:f,className:"w-100",type:"submit",children:"Update"})]})]})}),Object(v.jsx)("div",{className:"w-100 text-center mt-2",children:Object(v.jsx)(I.b,{to:"/user",children:"Cancel"})})]})}var G=c(82),B=c(81);function q(){return Object(v.jsxs)(G.a,{expand:"sm",children:[Object(v.jsx)(G.a.Brand,{as:I.b,to:"/",children:"Kanban"}),Object(v.jsx)(B.a,{children:Object(v.jsx)(B.a.Link,{as:I.b,to:"/user",children:"Account"})})]})}var T=c(23),J=c(33);function K(e){var t=e.task,c=e.index,a=e.columnDetails,n=e.state,r=e.setState,s=e.currentUser;function i(e){e.preventDefault();var c=a.taskIds.filter((function(e){return e!==t.id})),i=Object(E.a)(Object(E.a)({},n.columns[a.id]),{},{taskIds:c});delete n.tasks[t.id];var o=Object(E.a)(Object(E.a)({},n),{},{columns:Object(E.a)(Object(E.a)({},n.columns),{},Object(T.a)({},a.id,i))});r(o),x.collection("users").doc(s.uid).collection("columns").doc(a.id).update({taskIds:c}),x.collection("users").doc(s.uid).collection("tasks").doc(t.id).delete()}return Object(v.jsx)(J.b,{draggableId:t.id,index:c,children:function(e,c){return Object(v.jsxs)("div",Object(E.a)(Object(E.a)(Object(E.a)({className:"text-wrap border mb-2 p-2 rounded d-flex justify-content-between ".concat(c.isDragging?"bg-info":"bg-white")},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,isDragging:c.isDragging,children:[t.content,Object(v.jsx)(O.a,{variant:"outline-light",size:"sm",className:"text-muted border-0",onClick:i,children:"X"})]}))}})}function H(e){var t=e.column,c=e.tasks,a=e.state,n=e.setState,r=e.currentUser;return Object(v.jsxs)("div",{className:"border rounded w-25 m-3 d-flex flex-column",children:[Object(v.jsx)("h1",{className:"p-2 text-white bg-primary",children:t.title}),Object(v.jsx)(J.c,{droppableId:t.id,children:function(e,s){return Object(v.jsxs)("div",Object(E.a)(Object(E.a)({className:"flex-grow-1 p-2 ".concat(s.isDraggingOver?"bg-warning":"bg-white"),ref:e.innerRef},e.droppableProps),{},{isDraggingOver:s.isDraggingOver,children:[c.map((function(e,c){return Object(v.jsx)(K,{state:a,setState:n,task:e,index:c,columnDetails:t,currentUser:r},e.id)})),e.placeholder]}))}})]})}var z=c(83);function V(e){var t=e.state,c=e.setState,n=e.currentUser,r=Object(a.useState)(""),s=Object(u.a)(r,2),i=s[0],o=s[1];return Object(v.jsx)(S.a,{className:"w-50 mt-4",children:Object(v.jsxs)(b.a,{className:"d-flex flex-row",children:[Object(v.jsx)(b.a.Control,{value:i,placeholder:"Start Typing...",onChange:function(e){e.preventDefault(),o(e.target.value)}}),Object(v.jsx)(O.a,{variant:"primary",type:"submit",onClick:function(e){if(e.preventDefault(),i){var a=Object(z.a)();t.tasks[a]={id:a,content:i};var r=Array.from(t.columns.column1.taskIds);r.push(a);var s=Object(E.a)(Object(E.a)({},t.columns.column1),{},{taskIds:r}),l=Object(E.a)(Object(E.a)({},t),{},{columns:Object(E.a)(Object(E.a)({},t.columns),{},Object(T.a)({},s.id,s))});c(l),x.collection("users").doc(n.uid).collection("tasks").doc(a).set({id:a,content:i,userId:n.uid,createdAt:h.getCurrentTimestamp()}),x.collection("users").doc(n.uid).collection("columns").doc("column1").update({taskIds:r}),o("")}},className:"text-nowrap mx-1",children:"Add Task"})]})})}function W(e){var t=e.state,c=t.columns.column1.taskIds.length+t.columns.column2.taskIds.length+t.columns.column3.taskIds.length+t.columns.column4.taskIds.length,a=t.columns.column4.taskIds.length;return Object(v.jsxs)("h5",{className:"m-3 text-secondary",children:["Tasks Completed: ",a," / ",c," "]})}var X=function(e){var t=Object(a.useState)(null),c=Object(u.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(null),i=Object(u.a)(s,2),o=i[0],l=i[1],d=Object(a.useState)(null),j=Object(u.a)(d,2),b=j[0],O=j[1];return Object(a.useEffect)((function(){return x.collection("users").doc(e.uid).collection("tasks").onSnapshot((function(e){var t={};e.forEach((function(e){t[e.data().id]=e.data()})),r(t)}))}),[e]),Object(a.useEffect)((function(){return x.collection("users").doc(e.uid).collection("columns").onSnapshot((function(e){var t={};e.forEach((function(e){t[e.data().id]=e.data()})),l(t)}))}),[e]),Object(a.useEffect)((function(){if(n&&o){var e={};e.tasks=n,e.columns=o,e.columnOrder=["column1","column2","column3","column4"],O(e)}}),[n,o]),{state:b,setState:O}},Y=c(79),Q=function(){var e=w().currentUser,t=X(e),c=t.state,a=t.setState;return Object(v.jsx)(v.Fragment,{children:c?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(W,{state:c}),Object(v.jsx)(J.a,{onDragEnd:function(t){var n,r=t.destination,s=(t.source,t.draggableId);if(r&&(t.destination.droppableId!==t.source.droppableId||t.destination.index!==t.source.index)){var i=c.columns[t.source.droppableId],o=c.columns[t.destination.droppableId];if(i===o){var l=Array.from(i.taskIds);l.splice(t.source.index,1),l.splice(t.destination.index,0,s);var u=Object(E.a)(Object(E.a)({},o),{},{taskIds:l}),d=Object(E.a)(Object(E.a)({},c),{},{columns:Object(E.a)(Object(E.a)({},c.columns),{},Object(T.a)({},o.id,u))});return a(d),void x.collection("users").doc(e.uid).collection("columns").doc(i.id).update({taskIds:l})}var j=Array.from(i.taskIds);j.splice(t.source.index,1);var b=Object(E.a)(Object(E.a)({},i),{},{taskIds:j}),O=Array.from(o.taskIds);O.splice(t.destination.index,0,s);var p=Object(E.a)(Object(E.a)({},o),{},{taskIds:O}),m=Object(E.a)(Object(E.a)({},c),{},{columns:Object(E.a)(Object(E.a)({},c.columns),{},(n={},Object(T.a)(n,i.id,b),Object(T.a)(n,o.id,p),n))});a(m),x.collection("users").doc(e.uid).collection("columns").doc(b.id).update({taskIds:j}),x.collection("users").doc(e.uid).collection("columns").doc(p.id).update({taskIds:O})}},children:Object(v.jsx)("div",{className:"d-flex",children:c.columnOrder.map((function(t){var n=c.columns[t],r=n.taskIds.map((function(e){return c.tasks[e]}));return Object(v.jsx)(H,{column:n,tasks:r,state:c,setState:a,currentUser:e},n.id)}))})}),Object(v.jsx)(V,{state:c,setState:a,currentUser:e})]}):Object(v.jsx)(Y.a,{animation:"border",variant:"primary"})})};function M(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(q,{}),Object(v.jsx)(Q,{})]})}function Z(){return Object(v.jsx)(I.a,{children:Object(v.jsx)(k,{children:Object(v.jsxs)(y.d,{children:[Object(v.jsx)(R,{exact:!0,path:"/",component:M}),Object(v.jsx)(R,{path:"/user",component:P}),Object(v.jsx)(R,{path:"/update-profile",component:F}),Object(v.jsx)(y.b,{path:"/signup",component:C}),Object(v.jsx)(y.b,{path:"/login",component:U}),Object(v.jsx)(y.b,{path:"/forgot-password",component:A})]})})})}c(72);s.a.render(Object(v.jsx)(Z,{}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.afc5b843.chunk.js.map